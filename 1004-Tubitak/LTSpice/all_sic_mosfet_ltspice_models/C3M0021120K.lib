
**************************************************************************************************************************************************************************************************
*
*     888888               888888 	        888888     .o888888888888o.     8888  		88888888888	o888888888888888     88888888888888o	88888888888   88888888888   8888888888o
*       88888             88888888             88888      .8888888  8888888.    8888  		88888888888    o8888888888888888     888888  8888888o	88888888888   88888888888   88888888888o
*        88888           8888  8888           88888      .8888888.  .8888888.   8888  		8888	       888888888	     888888  88888888	8888	      8888	    8888   88888
*         88888         8888    8888         88888       88888888    88888888   8888		8888   	       888888888	     888888  88888888	8888	      8888	    8888   88888
*	   88888       8888      8888       88888        88888888    88888888   8888  		8888888	       o888888888888888o     888888  8888888o	8888888	      8888888	    8888   88888
*	    88888     8888        8888     88888	 88888888    88888888   8888  		8888888		o888888888888888o    88888888888888o	8888888	      8888888       8888   88888
*	     88888   8888          8888   88888          88888888    88888888   8888  		8888		         88888888    8888		8888	      8888	    8888   88888
*	      88888 8888            8888 88888  	 .8888888.  .8888888.   8888  		8888 			 88888888    8888		8888	      8888	    8888   88888
*	       88888888	 	     88888888		  .8888888  8888888.    88888888888	8888		8888888888888888o    8888		88888888888   88888888888   88888888888o
*		888888		      888888  		   .o888888888888o.     88888888888	8888		888888888888888o     8888		88888888888   88888888888   8888888888o
*
**************************************************************************************************************************************************************************************************
*******************************************************************************
**	DISCLAIMER
*******************************************************************************
**	This model is provided as is, where is, and with no warranty of any kind
**	either expressed or implied, including but not limited to any implied
**	warranties of merchantability and fitness for a particular purpose.
*******************************************************************************

***********************************************************
****	Wolfspeed SiC MOSFET C3M0021120K Spice Library
****	Version 1.0 Date: 08-17-2019
****
***********************************************************
****	Revision record
****	Version 1	Initial Release - Datasheet 07-2019
****
*********************************************************************************
****Parasitics Included
****Tj = Junction Temperature
****Tc = Case Temperature
****D = Drain
****G = Gate
****S1 = Kelvin Source
****S2 = Power Source
***********************************************************


.subckt C3M0021120K d g s1 s2 Tj Tc
.param Rgint = 3.3
xgmos	d3 d1 g1 s Tj gmos_C3M0021120K

RS1		s1	sb	10.34m
Ls1 		sb	sv	8.832n

RS2		s2	sa	1.196m
Ls2 		sa	sv	3.14535n

Rv		sv	st	150u
Lv		st	s	0.8n


R_g 		g1	g2	{Rgint}
RG		g	ga	14.6624m
Lg 		ga	g2	12.4941n


Rd		d	da	87.416u
Ld 		da	d3      4.3659n
R_Ld		da	d3	5

Ed		Id	0	value {I(Vdrain_s)}
Rdd		Id	0	1E6


vdrain_s	d3	d1	0
Gheat		0	Tj	value = {abs((V(d1,s)*v(Id)))+abs((V(g1,g2)*V(g1,g2)/Rgint))}

xCGD		d3	g1	cgdmos_C3M0021120K
CGS		g1	s	4806p
D1		s	d1	bodydiode_C3M0021120K
xCDS		d3	s	cds_C3M0021120K

R0 N1 Tj 44.1m
R1 N2 N1 104m
R2 N3 N2 63.78m
R3 Tc N3 112.1m

C0 Tj 0 2.214m
C1 N1 0 12.6m
C2 N2 0 34.16m
C3 N3 0 129.4m

.ends C3M0021120K

*****************************************

.subckt gmos_C3M0021120K d3 d1 g1 s Tj

e1		NET1	0	Value {((925.2u*V(Tj)**2-0.1998*V(Tj)+22.12)*(V(gk,s)**2)+
+					(-23.03m*V(Tj)**2+4.789*V(Tj)-433.7)*v(gk,s)+
+					(0.1278*V(Tj)**2-27.43*V(Tj)+3136))/1000
+					}
R_a		NET1	0 	1E6

e2		NET2	0	Value {15.35m*V(gk,s)+371.85m}
R_B		NET2	0 	1E6

e3		NET3	0	Value {10u*(V(Tj)**2)-5.5m*V(Tj)+2.6226}
R_C		NET3	0 	1E6

*e4		NET4	0	value {0.03}
e4		NET4	0	Value {limit(-48.935n*V(Tj)**2-122.154u*V(Tj)+22.895m,0,0.055)}
R_d		NET4	0 	1E6

e5		NET5   0	Value {
+					if (V(gk,s)>=11 ,
*+				(5.97*V(gk,s)**3-243.522*V(gk,s)**2+3046.074*V(gk,s)-10009.682)/10000
*+				(-2.167*V(gk,s)**2+129.792*V(gk,s)+10298.58)/10000
+				((-32.529n*V(Tj)**4+6.5711u*V(Tj)**3+163.36u*V(Tj)**2-81.356m*V(Tj)+2.3922)*V(gk,s)**3+
+				(1.4566u*V(Tj)**4-288.78u*V(Tj)**3-8.9357m*V(Tj)**2+3.7329*V(Tj)-72.624)*V(gk,s)**2+
+				(-21.67u*V(Tj)**4+4.1989m*V(Tj)**3+0.16242*V(Tj)**2-56.681*V(Tj)+334.09)*v(gk,s)+
+				(105.74u*V(Tj)**4-19.769m*V(Tj)**3-1.0083*V(Tj)**2+282.8*V(Tj)+4337.8))/10000
+					,
*+				(-33.125*V(gk,s)**2+780*V(gk,s)-2598.875)/10000
+				Limit(((306.5n*V(Tj)**4-105.2u*V(Tj)**3+11.45m*V(Tj)**2-32.17m*V(Tj)-89.83)*(V(gk,s)**2)+
+				(-7.787u*V(Tj)**4+2.409m*V(Tj)**3-0.2116*V(Tj)**2-5.491*V(Tj)+1590)*v(gk,s)+
+				(49.54u*V(Tj)**4-13.73m*V(Tj)**3+0.8681*V(Tj)**2+67.42*V(Tj)-4253))/10000,0.001,1)
+			)
+			}

*e5		NET5	0	value {0.125}
R_e		NET5	0 	1E6

*e10		NET10   0	Value {0.049}
e10		NET10   0	Value {Limit(((46.07u*V(Tj)**2-10.44m*V(Tj)+1.42)*(V(gk,s)**3)+
+					(-1.735m*V(Tj)**2+0.3991*V(Tj)-47.6)*(V(gk,s)**2)+
+					(22.57m*V(Tj)**2-5.049*V(Tj)+486.1)*v(gk,s)+
+					(-0.1012*V(Tj)**2+21.11*V(Tj)-1362))/1000,0,1)
+				      }
R_K		NET10	0	1E6

.param p10  = 0.0011
.param p11 = -8
.param p12 = 19
.param p13 = 15

*e_p8	P8	0	Value {0.0011}
e_p8	P8	0	Value {Limit(((23.5u*V(Tj)**2-2.112m*V(Tj)-0.5059)*(V(gk,s)**2)+
+					(-674.6u*V(Tj)**2+61.57m*V(Tj)+15.17)*v(gk,s)+
+					(5.816m*V(Tj)**2-0.7002*V(Tj)-57.07))/1000,0.001,1)
+					}
R_R	P8	0 	1E6

R100 gk s	1E6
E100 gk s 	value {limit(V(g1,s),p11,p12)}

********************************
G1 d1 s value {
+	if(V(s,d3)<0,
+		0
+		,
+		if (V(gk,s)<V(NET3),
+		-((0.035)*(v(gk,s)-V(NET3)))*(-(1+p10*v(s,d3))*0.008)*(((log(1+exp(v(gk,s)-V(NET3))))**2)-
+		((log(1+exp(v(gk,s)-V(NET3)-(0.854*v(s,d3)))))**2))
+		,
*+		0
+		-((((v(NET5)+v(NET4))*(v(gk,s)-V(NET3))))*(1+v(P8)*v(s,d3))*(((log(1+exp(v(gk,s)-V(NET3))))**2)-
+		((log(1+exp(v(gk,s)-V(NET3)-(V(NET2)*v(s,d3)*((1+exp(-v(NET10)*v(s,d3)))**v(NET1))))))**2)))
+		)
+			)
+			}
G2 d1 s value {
+	if(V(d3,s)<0,
+		0
+		,
+		if (V(gk,s)<V(NET3),
+		((0.035)*(v(gk,s)-V(NET3)))*(-(1+p10*v(d3,s))*0.008)*(((log(1+exp(v(gk,s)-V(NET3))))**2)-
+		((log(1+exp(v(gk,s)-V(NET3)-(0.854*v(d3,s)))))**2))
+		,
+		((v(NET5)*(v(gk,s)-V(NET3))))*(1+v(P8)*v(d3,s))*(((log(1+exp(v(gk,s)-V(NET3))))**2)-
+		((log(1+exp(v(gk,s)-V(NET3)-(V(NET2)*v(d3,s)*((1+exp(-v(NET10)*v(d3,s)))**v(NET1))))))**2))
+		)
+			)
+			}


.ends gmos_C3M0021120K

****************************************

.subckt cgdmos_C3M0021120K d3 g1

.param k1=1810p
.param k2=0.475
.param ka=80
.param kb=0.5
.param kc=6

G11 g1 d1 value {
+		k1*(
+		(1+(limit(v(d3,g1),0,468))*(1+ka*(1+TANH(kb*V(d3,g1)-kc))/2))**-k2
+		)*ddt(v(g1,d3))
+			}
R_CGD d1 d3 1E-4
.ends cgdmos_C3M0021120K


.subckt cds_C3M0021120K d3 s

.param Cjo = 3835p
.param Vj  = 3
.param M   = 0.615

G12 d1 s value {
+	if(V(d3,s)>0,
+		(Cjo/(1+(limit(v(d3,s),0,490)/Vj)**M))*ddt(v(d3,s));
+		,
+		0
+			)
+			}

R_CDS d1 d3 1E-4

.ends cds_C3M0021120K
****************************************
.model bodydiode_C3M0021120K d(is=200n bv=1590 EG=5.4 n=8.4
+	rs=0.013  trs1=-1.75m  trs2=14u Tnom=25
+	tt=3n ibv=500u Xti=10 level=1)
